# 快速排序3-way-partition变体

### Three-way Partition 

在快速排序中，有一个**变种**是**将选择的pivot都放到中间**。 

例如 \[5,1,5,7,5,8,3,5\]，选择最末尾的 5 作为pivot，partition以后可以变成 \[3,1,5,5,5,5,8,7\]。

之后再partition时，把比5小的放在左边，把比5大的放在右边

也就是处理\[3,1\]与\[8,7\]，**对于重复元素比较多的聚集情况，这是一种很有效的优化**

**步骤**

**选基准**：可以按照median-of-3选出一个

**普通过程**例如：\[7\]\[2\]\[7\]\[1\]\[7\]\[4\]\[7\]\[6\]\[3\]\[8\] 由三数取中可得基准为\[7\]

* 第一趟：\[7\] \[2\] \[3\] \[1\] \[6\] \[4\] \[7\] \[7\] \[7\] \[8\]
* 第二趟：\[1\] \[2\] \[3\] \[4\] \[6\] \[7\] \[7\] \[7\] \[7\] \[8\]
* 第三趟：\[1\] \[2\] \[3\] \[4\] \[6\] \[7\] \[7\] \[7\] \[7\] \[8\]
* 第四趟：\[1\] \[2\] \[3\] \[4\] \[6\] \[7\] \[7\] \[7\] \[7\] \[8\]

聚集相同元素：

* 第一步：\[7\] \[7\] \[7\] \[1\] \[2\] \[4\] \[3\] \[6\] \[7\] \[8\]
* 第二步：\[6\] \[3\] \[4\] \[1\] \[2\] \[7\] \[7\] \[7\] \[7\] \[8\]

接下来是对\[6\] \[3\] \[4\] \[1\] \[2\] 和 \[8\]进行快排。

### **题目**

| 序号/难度 | 名字 | 备注 |  |
| :--- | :--- | :--- | :--- |
| 75 | 颜色分类（荷兰国旗） | 对只存在0,1,2值的数组排序，双指针 | 理清关系 |
| 324 | 摆动排序 | 要求O\(n\)时间，O\(1\)空间 | 解题技巧 |


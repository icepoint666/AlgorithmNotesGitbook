# 字符串

**题目**

| 序号/难度 | 名字 | 备注 |  |
| :--- | :--- | :--- | :--- |
| 剑指 Offer 20 |  表示数值的字符串 | 关键在于列出所有情况 | 恶心 |
| 剑指 Offer 67 | 把字符串转换成整数 | 关键在于考虑所有情况 | 记忆 |

**剑指 Offer20. 表示数值的字符串**

首先字符串只能是两种形式A\[.\[B\]\]\[e\|EC\]//.B\[e\|EC\] 

明确一些情况： 

* A带符号的整数；
* B无符号整数， 
* 小数点前后必有数字
* e后面必有一个（有符号）整数
* 空格只能出现在字符串首尾；

**剑指 Offer 67. 把字符串转换成整数**

**关键：**

以下四种字符需要考虑：

* **首部空格**： 删除之即可； 
* **符号位**： 三种情况，即 ''++'' , ''-−'' , ''无符号" ；新建一个变量保存符号位，返回前判断正负即可。
* **非数字字符**： 遇到首个非数字的字符时，应立即返回。 
* **数字字符**：遇到首个数字字符，处理完数字也直接返回
  * 字符转数字： “此数字的 ASCII 码” 与 “ 00 的 ASCII 码” 相减即可； 
  * 数字拼接： 若从左向右遍历数字，设当前位字符为 cc ，当前位数字为 xx ，数字结果为 resres ，则数字拼接公式为：

 **数字越界处理：**

 考虑数字越界问题。而由于题目指出 `环境只能存储 32 位大小的有符号整数` ，因此判断数字越界时，要始终保持 res在 int 类型的取值范围内。

```cpp
class Solution {
public:
    int strToInt(string str) {
        int i = 0, flag = 1;
        long res = 0; //默认flag = 1，正数
        while (str[i] == ' ') i ++;
        if (str[i] == '-') flag = -1;
        if (str[i] == '-' || str[i] == '+') i ++;
        for (; i < str.size() && isdigit(str[i]); i ++)  {
            res = res * 10 + (str[i] - '0');
            if (res >= INT_MAX && flag == 1) return  INT_MAX;
            if (res > INT_MAX && flag == -1) return  INT_MIN;
        } 
        return flag * res;
    }
};
```


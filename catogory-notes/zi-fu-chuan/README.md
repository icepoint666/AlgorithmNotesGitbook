# 字符串

**题目**

| 序号/难度 | 名字 | 备注 |  |
| :--- | :--- | :--- | :--- |
| 剑指 Offer 20 |  表示数值的字符串 | 关键在于列出所有情况 | 恶心 |
| 剑指 Offer 67 | 把字符串转换成整数 | 关键在于考虑所有情况 | 记忆 |
| 459 | 重复的子字符串 | 双倍字符串+find函数的使用 | 巧解 |
| 1328 | 破坏回文串 | 有坑的题 | 小心 |
| 1249 | 移除无效的括号 | 字符串删除技巧 | 简单 |

**剑指 Offer20. 表示数值的字符串**

首先字符串只能是两种形式A\[.\[B\]\]\[e\|EC\]//.B\[e\|EC\] 

明确一些情况： 

* A带符号的整数；
* B无符号整数， 
* 小数点前后必有数字
* e后面必有一个（有符号）整数
* 空格只能出现在字符串首尾；

**剑指 Offer 67. 把字符串转换成整数**

**关键：**

以下四种字符需要考虑：

* **首部空格**： 删除之即可； 
* **符号位**： 三种情况，即 ''++'' , ''-−'' , ''无符号" ；新建一个变量保存符号位，返回前判断正负即可。
* **非数字字符**： 遇到首个非数字的字符时，应立即返回。 
* **数字字符**：遇到首个数字字符，处理完数字也直接返回
  * 字符转数字： “此数字的 ASCII 码” 与 “ 00 的 ASCII 码” 相减即可； 
  * 数字拼接： 若从左向右遍历数字，设当前位字符为 cc ，当前位数字为 xx ，数字结果为 resres ，则数字拼接公式为：

 **数字越界处理：**

 考虑数字越界问题。而由于题目指出 `环境只能存储 32 位大小的有符号整数` ，因此判断数字越界时，要始终保持 res在 int 类型的取值范围内。

```cpp
class Solution {
public:
    int strToInt(string str) {
        int i = 0, flag = 1;
        long res = 0; //默认flag = 1，正数
        while (str[i] == ' ') i ++;
        if (str[i] == '-') flag = -1;
        if (str[i] == '-' || str[i] == '+') i ++;
        for (; i < str.size() && isdigit(str[i]); i ++)  {
            res = res * 10 + (str[i] - '0');
            if (res >= INT_MAX && flag == 1) return  INT_MAX;
            if (res > INT_MAX && flag == -1) return  INT_MIN;
        } 
        return flag * res;
    }
};
```

**459. 重复的子字符串**

**题意：判断字符串是否是一个纯循环的字符串**

如果 s 中没有循环节，那么 s**+**s 中必然有且只有两个 s，此时从 \(s+s\)\[1\] 处开始寻找 s ，必然只能找到**第二个**，所以此时返回值为 s.size\(\)。

```cpp
bool repeatedSubstringPattern(string s) {
    return (s+s).find(s, 1)!=s.size();
}
```

**1328. 破坏回文串**

**代码见leetcode，破坏原则：**

①遇到a字符的话跳过，遇到不是a字符的话直接替换为a，返回

②如果全是a，替换最后一个为b就可以了

**③坑：如果长度为奇数，中间字符替换是没有用的，要注意！**

\*\*\*\*

**1249. 移除无效的括号**

**字符串一边遍历一边删除的技巧：用空格来替换被删除的字符**

**代码加leetcode**

